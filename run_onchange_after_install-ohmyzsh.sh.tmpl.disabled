{{- if (eq .chezmoi.os "darwin") -}}
#!/bin/bash

if [ ! -d "$HOME/.oh-my-zsh" ]; then
	echo "Getting ohmyz.sh"
#	sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)" "" --unattended
  git clone --depth=1 https://github.com/ohmyzsh/ohmyzsh.git "$HOME/.oh-my-zsh"
else
  # Check if it's a valid git repository before pulling
  if git -C "$HOME/.oh-my-zsh" rev-parse --git-dir > /dev/null 2>&1; then
    git -C "$HOME/.oh-my-zsh" pull https://github.com/ohmyzsh/ohmyzsh.git --quiet
  fi
	echo ".oh-my-zsh already found, skipping."
fi

{{- end -}}

{{- if (eq .chezmoi.os "linux") -}}
#!/bin/bash

if [ ! -d "$HOME/.oh-my-zsh" ]; then
	echo "Getting ohmyz.sh"
#	sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)" "" --unattended
  git clone --depth=1 https://github.com/ohmyzsh/ohmyzsh.git "$HOME/.oh-my-zsh"
else
  # Check if it's a valid git repository before pulling
  if git -C "$HOME/.oh-my-zsh" rev-parse --git-dir > /dev/null 2>&1; then
    git -C "$HOME/.oh-my-zsh" pull https://github.com/ohmyzsh/ohmyzsh.git --quiet
  fi
	echo ".oh-my-zsh already found, skipping."
fi

{{- end -}}
